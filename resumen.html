<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Resumen y Envío</title>
<link rel="stylesheet" href="style.css">
<style>
.status { font-size:15px; padding:6px; display:inline-block; border-radius:4px; }
.ok { background:#d4edda; color:#155724; }
.no { background:#f8d7da; color:#721c24; }
.section { margin:10px 0; }
</style>
</head>
<body>

<header>EIEL - Resumen de Información</header>

<div class="container">
  <p><b>Ayuntamiento:</b> <span id="user"></span></p>

  <div class="card">
    <h3>Estado de módulos</h3>
    
    <div class="section">Agua: <span id="agua" class="status"></span></div>
    <div class="section">Alcantarillado: <span id="alc" class="status"></span></div>
    <div class="section">Residuos: <span id="res" class="status"></span></div>
    <div class="section">Documentación: <span id="docs" class="status"></span></div>
  </div>

  <div class="card">
    <p>Al enviar, la Diputación recibirá su declaración y copia para archivo municipal.</p>
    <button onclick="enviar()">Enviar declaración</button>
    <a href="menu.html" class="btn">Volver</a>
  </div>
</div>

<script>
if (!sessionStorage.getItem("usuario")) {
  window.location.href = "index.html";
}

// Estado temporal en navegador (luego será BD)
const estados = JSON.parse(localStorage.getItem("eiel_estado") || "{}");

function setStatus(id, done) {
  const el = document.getElementById(id);
  if (done) {
    el.textContent = "✔ Completado";
    el.className = "status ok";
  } else {
    el.textContent = "Pendiente ✖";
    el.className = "status no";
  }
}

// Mostrar usuario
document.getElementById("user").textContent = sessionStorage.getItem("usuario");

// Mostrar estados
setStatus("agua", estados.agua);
setStatus("alc", estados.alc);
setStatus("res", estados.res);
setStatus("docs", estados.docs);

function enviar() {
  alert("Envío registrado (modo demo)\nSe generará justificante oficial.");
  sessionStorage.clear();
  localStorage.removeItem("eiel_estado");
  window.location.href = "index.html";
}
</script>
</body>
</html>
